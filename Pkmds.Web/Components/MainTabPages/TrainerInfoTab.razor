@inherits BasePkmdsComponent

@if (AppState.SaveFile is { Context: { } saveFileEntityContext, Generation: { } saveGeneration } saveFile &&
saveFileEntityContext is not
EntityContext.None or
EntityContext.SplitInvalid or
EntityContext.MaxInvalid)
{
    <MudTextField Label="Name"
                  Variant="@Variant.Outlined"
                  @bind-Value="@saveFile.OT"
                  For="@(() => saveFile.OT)" />

    @switch (saveFile.GetTrainerIDFormat())
    {
        case TrainerIDFormat.SixteenBit:
            {
                <MudNumericField Label="ID"
                                 Variant="@Variant.Outlined"
                                 @bind-Value="@saveFile.TID16"
                                 Format="@AppService.GetIdFormatString()"
                                 For="@(() => saveFile.TID16)" />

                @if (saveGeneration >= 3)
                {
                    <MudNumericField Label="SID"
                                     Variant="@Variant.Outlined"
                                     @bind-Value="@saveFile.SID16"
                                     Format="@AppService.GetIdFormatString(true)"
                                     For="@(() => saveFile.SID16)" />
                }

            }
            break;

        case TrainerIDFormat.SixDigit:
            {
                <MudNumericField Label="ID"
                                 Variant="@Variant.Outlined"
                                 @bind-Value="@saveFile.TrainerTID7"
                                 Format="@AppService.GetIdFormatString()"
                                 For="@(() => saveFile.TrainerTID7)" />

                @if (saveGeneration >= 3)
                {
                    <MudNumericField Label="SID"
                                     Variant="@Variant.Outlined"
                                     @bind-Value="@saveFile.TrainerSID7"
                                     Format="@AppService.GetIdFormatString(true)"
                                     For="@(() => saveFile.TrainerSID7)" />
                }

            }
            break;
    }

    @if (saveGeneration >= 2)
    {
        <GenderDisplayComponent Gender="@((Gender)saveFile.Gender)"
                                OnClick="@OnGenderToggle" />
    }

    <MudNumericField Label="Money"
                     T="@uint"
                     Variant="@Variant.Outlined"
                     Adornment="@Adornment.Start"
                     AdornmentIcon="@Constants.PokeDollarSvg"
                     Min="0"
                     Max="@((uint)saveFile.MaxMoney)"
                     @bind-Value="@saveFile.Money"
                     For="@(() => saveFile.Money)" />
}
