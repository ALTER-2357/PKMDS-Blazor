@inherits BaseEditForm

@if (AppState.SelectedPokemon is not null)
{
    <MudNumericField Label="PID"
                     Variant="@Variant.Outlined"
                     @bind-Value="AppState.SelectedPokemon.PID"
                     For="@(() => AppState.SelectedPokemon.PID)" />

    <MudAutocomplete Label="Species"
                     Variant="@Variant.Outlined"
                     @bind-Value="@AppState.SelectedPokemon.Species"
                     @bind-Value:after="@(AppState.Refresh)"
                     SearchFunc="@(async (searchString) => await AppState.SearchPokemonNames(EntityContext.Gen5, searchString))"
                     ToStringFunc="@AppState.ConvertSpeciesToName"
                     For="@(() => AppState.SelectedPokemon.Species)" />

    <MudTextField Label="Nickname"
                  Variant="@Variant.Outlined"
                  @bind-Value="@AppState.SelectedPokemon.Nickname"
                  For="@(() => AppState.SelectedPokemon.Nickname)" />

    <MudNumericField Label="EXP"
                     Variant="@Variant.Outlined"
                     @bind-Value="@AppState.SelectedPokemon.EXP"
                     For="@(() => AppState.SelectedPokemon.EXP)" />

    <MudNumericField Label="Level"
                     Variant="@Variant.Outlined"
                     @bind-Value="@AppState.SelectedPokemon.CurrentLevel"
                     For="@(() => AppState.SelectedPokemon.CurrentLevel)" />

    <MudSelect Label="Nature"
               Variant="@Variant.Outlined"
               @bind-Value="@AppState.SelectedPokemon.Nature"
               For="@(() => AppState.SelectedPokemon.Nature)">
        @foreach (Nature nature in Enum.GetValues(typeof(Nature)))
        {
            if (nature == Nature.Random)
            {
                continue;
            }
            <MudSelectItem Value="@((int)nature)">
                <MudStack>
                    <MudText>
                        @(nature.ToString())
                    </MudText>
                    @{
                        var str = AppState.GetStatModifierString((int)nature);
                    }
                    @if (str is { Length: > 0 })
                    {
                        <MudText>
                            @str
                        </MudText>
                    }
                </MudStack>
            </MudSelectItem>
        }
    </MudSelect>

    @*
    <MudAutocomplete Label="Held Item"
                     Variant="@Variant.Outlined"
                     @bind-Value="@AppState.SelectedPokemon.HeldItem"
                     @bind-Value:after="@(AppState.Refresh)"
                     SearchFunc="@(async (searchString) => await AppState.SearchItemNames(EntityContext.Gen5, searchString))"
                     ToStringFunc="@AppState.ConvertItemToName"
                     For="@(() => AppState.SelectedPokemon.HeldItem)" />

    <MudAutocomplete Label="Ability"
                     Variant="@Variant.Outlined"
                     @bind-Value="@AppState.SelectedPokemon.Ability"
                     @bind-Value:after="@(AppState.Refresh)"
                     SearchFunc="@(async (searchString) => await AppState.SearchAbilityNames(EntityContext.Gen5, searchString))"
                     ToStringFunc="@AppState.ConvertAbilityToName"
                     For="@(() => AppState.SelectedPokemon.Ability)" />

    <MudAutocomplete Label="Language"
                     Variant="@Variant.Outlined"
                     @bind-Value="@AppState.SelectedPokemon.Language"
                     @bind-Value:after="@(AppState.Refresh)"
                     SearchFunc="@(async (searchString) => await AppState.SearchLanguageNames(EntityContext.Gen5, searchString))"
                     ToStringFunc="@AppState.ConvertLanguageToName"
                     For="@(() => AppState.SelectedPokemon.Language)" />
*@

    <MudNumericField Label="Friendship"
                     Variant="@Variant.Outlined"
                     Min="0"
                     Max="255"
                     @bind-Value="@AppState.SelectedPokemon.CurrentFriendship"
                     For="@(() => AppState.SelectedPokemon.CurrentFriendship)" />

    <MudNumericField Label="HP EV"
                     Variant="@Variant.Outlined"
                     Min="0"
                     Max="255"
                     @bind-Value="@AppState.SelectedPokemon.EV_HP"
                     For="@(() => AppState.SelectedPokemon.EV_HP)" />

    <MudNumericField Label="Attack EV"
                     Variant="@Variant.Outlined"
                     Min="0"
                     Max="255"
                     @bind-Value="@AppState.SelectedPokemon.EV_ATK"
                     For="@(() => AppState.SelectedPokemon.EV_ATK)" />

    <MudNumericField Label="Defense EV"
                     Variant="@Variant.Outlined"
                     Min="0"
                     Max="255"
                     @bind-Value="@AppState.SelectedPokemon.EV_DEF"
                     For="@(() => AppState.SelectedPokemon.EV_DEF)" />

    <MudNumericField Label="Speed EV"
                     Variant="@Variant.Outlined"
                     Min="0"
                     Max="255"
                     @bind-Value="@AppState.SelectedPokemon.EV_SPE"
                     For="@(() => AppState.SelectedPokemon.EV_SPE)" />

    <MudNumericField Label="Sp. Attack EV"
                     Variant="@Variant.Outlined"
                     Min="0"
                     Max="255"
                     @bind-Value="@AppState.SelectedPokemon.EV_SPA"
                     For="@(() => AppState.SelectedPokemon.EV_SPA)" />

    <MudNumericField Label="Sp. Defense EV"
                     Variant="@Variant.Outlined"
                     Min="0"
                     Max="255"
                     @bind-Value="@AppState.SelectedPokemon.EV_SPD"
                     For="@(() => AppState.SelectedPokemon.EV_SPD)" />

    <MudNumericField Label="HP IV"
                     Variant="@Variant.Outlined"
                     Min="0"
                     Max="31"
                     @bind-Value="@AppState.SelectedPokemon.IV_HP"
                     For="@(() => AppState.SelectedPokemon.IV_HP)" />

    <MudNumericField Label="Attack IV"
                     Variant="@Variant.Outlined"
                     Min="0"
                     Max="31"
                     @bind-Value="@AppState.SelectedPokemon.IV_ATK"
                     For="@(() => AppState.SelectedPokemon.IV_ATK)" />

    <MudNumericField Label="Defense IV"
                     Variant="@Variant.Outlined"
                     Min="0"
                     Max="31"
                     @bind-Value="@AppState.SelectedPokemon.IV_DEF"
                     For="@(() => AppState.SelectedPokemon.IV_DEF)" />

    <MudNumericField Label="Speed IV"
                     Variant="@Variant.Outlined"
                     Min="0"
                     Max="31"
                     @bind-Value="@AppState.SelectedPokemon.IV_SPE"
                     For="@(() => AppState.SelectedPokemon.IV_SPE)" />

    <MudNumericField Label="Sp. Attack IV"
                     Variant="@Variant.Outlined"
                     Min="0"
                     Max="31"
                     @bind-Value="@AppState.SelectedPokemon.IV_SPA"
                     For="@(() => AppState.SelectedPokemon.IV_SPA)" />

    <MudNumericField Label="Sp. Defense IV"
                     Variant="@Variant.Outlined"
                     Min="0"
                     Max="31"
                     @bind-Value="@AppState.SelectedPokemon.IV_SPD"
                     For="@(() => AppState.SelectedPokemon.IV_SPD)" />

    <MudCheckBox Label="Is Egg"
                 @bind-Checked="@AppState.SelectedPokemon.IsEgg"
                 @bind-Checked:after="@AppState.Refresh"
                 For="@(() => AppState.SelectedPokemon.IsEgg)" />

    <MudCheckBox Label="Infected"
                 @bind-Checked="@AppState.SelectedPokemon.PKRS_Infected"
                 @bind-Checked:after="@AppState.Refresh"
                 For="@(() => AppState.SelectedPokemon.PKRS_Infected)" />

    <MudCheckBox Label="Cured"
                 @bind-Checked="@AppState.SelectedPokemon.PKRS_Cured"
                 @bind-Checked:after="@AppState.Refresh"
                 For="@(() => AppState.SelectedPokemon.PKRS_Cured)" />
    @*
    <MudCheckBox Label="N's Sparkle'"
                 @bind-Checked="@AppState.SelectedPokemon"
                 @bind-Checked:after="@AppState.Refresh"
                 For="@(() => AppState.SelectedPokemon.PKRS_Cured)"/>
*@

    <MudCheckBox Label="Shiny"
                 Checked="@AppState.SelectedPokemon.IsShiny"
                 ReadOnly="@true"
                 For="@(() => AppState.SelectedPokemon.IsShiny)" />


    <MudCheckBox Label="Nicknamed"
                 @bind-Checked="@AppState.SelectedPokemon.IsNicknamed"
                 @bind-Checked:after="@AppState.Refresh"
                 For="@(() => AppState.SelectedPokemon.IsNicknamed)" />

    <MudSelect Label="Origin Game"
               Variant="@Variant.Outlined"
               @bind-Value="@AppState.SelectedPokemon.Version"
               ToStringFunc="@((version) => GameInfo.GetVersionName((GameVersion)version))"
               For="@(() => AppState.SelectedPokemon.Version)">
        @foreach (GameVersion version in Enum.GetValues(typeof(GameVersion)))
        {
            <MudSelectItem Value="@((int)(byte)version)" />
        }
    </MudSelect>

    <MudAutocomplete Label="Met Location"
                     Variant="@Variant.Outlined"
                     @bind-Value="@AppState.SelectedPokemon.Met_Location"
                     For="@(() => AppState.SelectedPokemon.Language)" />
    @*
                     SearchFunc="@(async (searchString) => await AppState.SearchLanguageNames(EntityContext.Gen5, searchString))"
                     ToStringFunc="@AppState.ConvertLanguageToName"
*@

    <MudSelect Label="Ball"
               Variant="@Variant.Outlined"
               @bind-Value="@AppState.SelectedPokemon.Ball"
               For="@(() => AppState.SelectedPokemon.Ball)">
        @foreach (ComboItem ball in GameInfo.BallDataSource)
        {
            <MudSelectItem Value="@ball.Value">
                <MudStack Row="@true">
                    <MudImage Src="@SpriteHelper.GetBallSpriteFilename(ball.Value)"
                              Width="20"
                              Height="20"/>
                    <MudText>
                        @ball.Text
                    </MudText>
                </MudStack>
            </MudSelectItem>
        }
    </MudSelect>
}

@code {
    //var metLocations = GameInfo.GetLocationList(GameVers, context, egg: false);
}
