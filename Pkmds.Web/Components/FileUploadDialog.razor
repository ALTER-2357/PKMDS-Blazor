@inherits BasePkmdsComponent

<MudDialog>
    <DialogContent>
        <MudFileUpload T="IBrowserFile"
                       FilesChanged="HandleFile">
            <ButtonTemplate>
                <MudButton HtmlTag="label"
                           Variant="@Variant.Filled"
                           for="@context">
                    Choose a save file
                </MudButton>
            </ButtonTemplate>
            <SelectedTemplate>
                @if (context != null)
                {
                    <MudText>
                        @context.Name
                    </MudText>
                }
                else
                {
                    <MudText>
                        No File
                    </MudText>
                }
            </SelectedTemplate>
        </MudFileUpload>
    </DialogContent>
    <DialogActions>
        <MudButton OnClick="@Cancel"
                   Variant="@Variant.Filled">
            Cancel
        </MudButton>
        <MudButton OnClick="@Ok"
                   Variant="@Variant.Filled"
                   Color="@Color.Primary"
                   Disabled=@(browserFile is null)>
            Ok
        </MudButton>
    </DialogActions>
</MudDialog>

@code {
    [CascadingParameter]
    private MudDialogInstance MudDialog { get; set; } = default!;

    private IBrowserFile? browserFile;

    private void HandleFile(IBrowserFile file) => browserFile = file;

    private void Cancel() => MudDialog.Close(DialogResult.Cancel());

    private void Ok() => MudDialog.Close(DialogResult.Ok(browserFile));
}
